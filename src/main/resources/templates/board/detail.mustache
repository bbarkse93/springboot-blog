{{> /layout/header}}

<div class="container p-5">
  <!-- ë²„íŠ¼ 3ê°œ ìš°ì¸¡ì •ë ¬ -->
  {{#pageOwner}}
  <div class="d-flex justify-content-end m-1">
    <button type="button" class="btn btn-outline-info m-1">
      <a href="/">ëŒì•„ê°€ê¸°</a>
    </button>
    <a class="btn btn-outline-warning m-1" href="/board/{{dtos.0.boardId}}/updateForm">ìˆ˜ì •</a>
    <form action="/board/{{dtos.0.boardId}}/delete" method="post">
      <button type="submit" class="btn btn-outline-danger m-1">ì‚­ì œ</button>
    </form>
    {{! buttonì˜ íƒ€ì…ì€ ê¸°ë³¸ê°’ì´ í¼íƒœê·¸ ì•ˆì— ìˆìœ¼ë©´ submitì´ê³  í¼ íƒœê·¸ ë°–ì— ìˆìœ¼ë©´ buttonì´ë‹¤. }}
  </div>
  {{/pageOwner}}
  {{^pageOwner}}
  <div class="d-flex justify-content-end m-1">
    <button type="button" class="btn btn-outline-info m-1">
      <a href="/">ëŒì•„ê°€ê¸°</a>
    </button>
  </div>
  {{/pageOwner}}

  <!-- ë©”ì¸ -->
  <div class="card">
    <div class="card-body">
      <!-- ì œëª© -->
      <h3>{{dtos.0.boardTitle}}</h3>
      <hr class="m-0" />
      <!-- ê¸€ì“´ì´ ì •ë³´ -->
      {{#list}}
      <div class="d-flex justify-content-between" style="font-size: 15px">
        <p class="mx-1">ì‘ì„±ì: {{ userUsername }}</p>
        <p class="mx-1" id="formattedDateTime">{{ boardCreatedAt }}</p>
      </div>
      {{/list}}
      <!-- ë‚´ìš© -->
      <div class="m-3">
        <h5>{{dtos.0.boardContent}}</h5>
      </div>
    </div>

    <!-- ëŒ“ê¸€ -->
    <div class="card">
      <div class="card-header"><b>ëŒ“ê¸€</b></div>
      <form action="/reply/save" method="post">
        <input type="hidden" name="boardId" value="{{dtos.0.boardId}}" />
        <div class="d-flex">
          <textarea class="form-control m-3 flex-grow-2" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" rows="1" name="comment"></textarea>
          <button type="submit" class="btn btn-primary m-3" style="white-space: nowrap">
            ë“±ë¡
          </button>
        </div>
      </form>

      <div class="card-footer bg-white">
        <b>ëŒ“ê¸€ ë¦¬ìŠ¤íŠ¸</b>
        <hr />
        {{#dtos}}
        {{#replyUserId}}
        <ul class="list-group list-group-flush">
          <!-- ëŒ“ê¸€ ì•„ì´í…œ-->
          <div>ì‘ì„±ì: {{ replyUserUsername }}</div>
          <li
            class="list-group-item d-flex justify-content-between align-items-center">
            <div>{{ replyComment }}</div>
            {{#replyOwner}}
            <form action="/reply/{{ replyId }}/delete" method="post">
              <input type="hidden" name="boardId" value="{{ boardId }}" />
              <button type="submit" class="btn" onclick="replyRemove">ğŸ—‘</button>
            </form>
            {{/replyOwner}}
          </li>
        </ul>
        <hr />
        {{/replyUserId}}
        {{/dtos}}
      </div>
    </div>
  </div>
</div>

<script>
  let currentDateTime = new Date();
  let options = {
    year: "2-digit",
    month: "2-digit",
    day: "2-digit",
    hour: "numeric",
    minute: "numeric",
    hour12: true,
  };

  let formatter = new Intl.DateTimeFormat("en-US", options);
  let formattedDateTime = formatter.format(currentDateTime);

  document.getElementById("formattedDateTime").textContent =
    "ì‘ì„±ì‹œê°„: " + formattedDateTime;
</script>
{{> /layout/footer}}
